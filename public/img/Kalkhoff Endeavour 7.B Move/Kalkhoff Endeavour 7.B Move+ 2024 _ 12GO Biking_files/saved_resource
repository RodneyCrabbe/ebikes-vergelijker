// Billy Grace Pixel v0.4.10 | Published By Billy Grace 
"use strict";function _createForOfIteratorHelper(t,e){var n,i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length)return i&&(t=i),n=0,{s:e=function(){},n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){a=!0,r=t},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw r}}}}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Map"===(n="Object"===n&&t.constructor?t.constructor.name:n)||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function _iterableToArrayLimit(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(o.push(i.value),!e||o.length!==e);a=!0);}catch(t){u=!0,r=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw r}}return o}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}!function(r,a,o){var u={id:"",params:{},version:"v0.4.10",websiteType:"regular",trackingType:"web",optionalInit:{}},l=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"isPresent",value:function(t){return null!=t&&""!==t}},{key:"isBoolIntString",value:function(t){return"string"==typeof t||"boolean"==typeof t||"number"==typeof t&&Number.isInteger(t)}},{key:"now",value:function(){return+new Date}},{key:"guid",value:function(){return u.version+"-xxxxxxxx-".replace(/[x]/g,function(t){var e=36*Math.random()|0;return("x"==t?e:3&e|8).toString(36)})+(+new Date).toString(36)}},{key:"createSessionId",value:function(t){t=t||this.guid();return"".concat(t,"_").concat(Date.now())}},{key:"pageviewId",value:function(){return u.version+"-xxxxxxxx-".replace(/[x]/g,function(t){var e=10*Math.random()|0;return("x"==t?e:3&e|8).toString(10)})+(+new Date).toString(10)}},{key:"optionalData",value:function(t){return!1===e.isPresent(t)?"":"object"===_typeof(t)?e.optionalData(JSON.stringify(t)):"function"==typeof t?e.optionalData(t()):String(t)}},{key:"parseIdAndDateFromString",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"_";if(!t.includes(e))return[!1,!1];t=t.split(e),e=t[t.length-1],e=Number(e);if(isNaN(e))return[t[0],!1];e=new Date(e);return isNaN(e.getTime())?[t[0],!1]:[t[0],e]}}]),e}(),n=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"nameAndVersion",value:function(){var t,e=navigator.userAgent,n=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?"IE "+((t=/\brv[ :]+(\d+)/g.exec(e)||[])[1]||""):"Chrome"===n[1]&&null!=(t=e.match(/\b(OPR|Edge)\/(\d+)/))?t.slice(1).join(" ").replace("OPR","Opera"):(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(t=e.match(/version\/(\d+)/i))&&n.splice(1,1,t[1]),n.join(" "))}},{key:"isMobile",value:function(){return"ontouchstart"in r||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints}},{key:"userAgent",value:function(){return r.navigator.userAgent}}]),t}(),c=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"getQueryParams",value:function(t){return(t=t||r.location.search)?(/^[?#]/.test(t)?t.slice(1):t).split("&").reduce(function(t,e){var e=_slicedToArray(e.split("="),2),n=e[0],e=e[1];return t[n]=e?decodeURIComponent(e.replace(/\+/g," ")):"",t},{}):{}}},{key:"externalHost",value:function(t){return t.hostname!=location.hostname&&0===t.protocol.indexOf("http")}}]),t}(),s=function(){function i(){_classCallCheck(this,i)}return _createClass(i,null,[{key:"prefix",value:function(){return"__".concat("BillyPix","_")}},{key:"maxLifetime",value:function(){return 262799}},{key:"set",value:function(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]&&arguments[3],r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"/",o="",i=(!1===i&&(i=l.isPresent(n)?n:this.maxLifetime(),(n=new Date).setTime(n.getTime()+60*i*1e3),o="expires=".concat(n.toUTCString(),"; ")),"");null!=a&&null!=(n=a.location)&&n.hostname&&((n=a.location.hostname).startsWith("www.")&&(n=n.replace("www.","")),i=" domain=.".concat(n,";")),a.cookie="".concat(this.prefix()).concat(t,"=").concat(e,"; ").concat(o,"path=").concat(r,";").concat(i," Secure; SameSite=Lax")}},{key:"get",value:function(t){for(var t="".concat(this.prefix()).concat(t,"="),e=a.cookie.split(";"),n=0;n<e.length;n++){for(var i=e[n];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(t))return i.substring(t.length,i.length)}}},{key:"delete",value:function(t){this.set(t,"",-100)}},{key:"exists",value:function(t){return l.isPresent(this.get(t))}},{key:"setUtms",value:function(){for(var t=["utm_source","utm_medium","utm_term","utm_content","utm_campaign","utm_source_platform","utm_creative_format","utm_marketing_tactic","bg_source","bg_source_id","bg_kw","bg_campaign","bg_aid_k","bg_aid_v"],e={},n=!1,i=c.getQueryParams(),r=0,o=t.length;r<o;r++){var a=t[r];l.isPresent(i[a])&&(e[t[r]]=i[a],n=!0)}n&&(e.bg_ts="".concat(l.now()),this.set("utm",JSON.stringify(e)),this.set("session_id",l.createSessionId(),0,!0))}},{key:"getUtm",value:function(t){var e;if(this.exists("utm"))return t in(e=JSON.parse(this.get("utm")))?e[t]:""}},{key:"setOrUpdateSession",value:function(){var t,e,n;this.exists("session_id")?(n=this.get("session_id"),t=new Date,e=(n=_slicedToArray(l.parseIdAndDateFromString(n),2))[0],!1!==(n=n[1])&&(n.toDateString()!==t.toDateString()||18e5<Math.abs(t.getTime()-n.getTime())?i.set("session_id",l.createSessionId(),0,!0):i.set("session_id",l.createSessionId(e),0,!0))):i.set("session_id",l.createSessionId(),0,!0)}}]),i}(),d=function(){function i(t,e,n){_classCallCheck(this,i),this.params=[],this.event=t,this.timestamp=e,this.optional=l.optionalData(n),this.buildParams(),this.send()}return _createClass(i,[{key:"buildParams",value:function(){var t,e=this.getAttribute();for(t in e)e.hasOwnProperty(t)&&this.setParam(t,e[t](t))}},{key:"getAttribute",value:function(){var t=this,e={id:function(){return u.id},uid:function(){return s.get("uid")},session_id:function(){return s.get("session_id")},ev:function(){return t.event},ed:function(){return t.optional},v:function(){return u.version},dl:function(){return r.location.href},rl:function(){return a.referrer},ts:function(){return t.timestamp},de:function(){return""},sr:function(){return""},vp:function(){return""},cd:function(){return""},dt:function(){return a.title},bn:function(){return n.nameAndVersion()},md:function(){return n.isMobile()},ua:function(){return n.userAgent()},tz:function(){return(new Date).getTimezoneOffset()},tt:function(){return u.trackingType},utm_source:function(t){return s.getUtm(t)},utm_medium:function(t){return s.getUtm(t)},utm_term:function(t){return s.getUtm(t)},utm_content:function(t){return s.getUtm(t)},utm_campaign:function(t){return s.getUtm(t)},utm_source_platform:function(t){return s.getUtm(t)},utm_creative_format:function(t){return s.getUtm(t)},utm_marketing_tactic:function(t){return s.getUtm(t)},bg_source:function(t){return s.getUtm(t)},bg_source_id:function(t){return s.getUtm(t)},bg_kw:function(t){return s.getUtm(t)},bg_campaign:function(t){return s.getUtm(t)},bg_aid_k:function(t){return s.getUtm(t)},bg_aid_v:function(t){return s.getUtm(t)},bg_ts:function(t){return s.getUtm(t)}};return l.isPresent(u.optionalInit)&&u.optionalInit!={}&&(l.isPresent(u.optionalInit.debug)&&l.isBoolIntString(u.optionalInit.debug)&&(e.debug=function(){return u.optionalInit.debug}),l.isPresent(u.optionalInit.dev_token)&&l.isBoolIntString(u.optionalInit.dev_token)&&(e.dev_token=function(){return u.optionalInit.dev_token})),e}},{key:"setParam",value:function(t,e){l.isPresent(e)?this.params.push("".concat(t,"=").concat(encodeURIComponent(e))):this.params.push("".concat(t,"="))}},{key:"canSendBeacon",value:function(){return("shopify"!==u.websiteType||-1===r.location.href.indexOf("/cart"))&&r.navigator.sendBeacon}},{key:"send",value:function(){this.canSendBeacon()?this.sendBeacon():this.sendImage()}},{key:"sendBeacon",value:function(){r.navigator.sendBeacon(this.getSourceUrl())}},{key:"sendImage",value:function(){this.img=a.createElement("img"),this.img.src=this.getSourceUrl(),this.img.style.display="none",this.img.width="1",this.img.height="1",a.getElementsByTagName("body")[0].appendChild(this.img)}},{key:"getSourceUrl",value:function(){return"".concat("https://b.billypx.com","?").concat(this.params.join("&"))}}]),i}(),f=function(){function n(t,e){_classCallCheck(this,n),this.event=t,this.shopifyClientId=null==e?void 0:e.clientId,this.data=null==e?void 0:e.data,this.context=null==e?void 0:e.context,this.parseEvent()}return _createClass(n,[{key:"extractProducts",value:function(t){var e,n=[],i=_createForOfIteratorHelper(t);try{for(i.s();!(e=i.n()).done;){var r,o,a,u=e.value;n.push({vid:null==(r=u.variant)?void 0:r.id,pid:null==(o=u.variant)||null==(a=o.product)?void 0:a.id})}}catch(t){i.e(t)}finally{i.f()}return n}},{key:"parseEvent",value:function(){switch(this.event){case"checkout_completed":this.orderPlaced();break;case"checkout_started":this.checkoutStarted();break;case"collection_viewed":this.collectionViewed();break;case"page_viewed":this.pageViewed();break;case"payment_info_submitted":this.paymentInfoSubmitted();break;case"product_added_to_cart":this.addToCart();break;case"product_viewed":this.productView();break;case"search_submitted":this.searchSubmitted();break;default:["clicked","form_submitted","input_blurred","input_changed","input_focused"].includes(this.event)||new d(this.event,l.now(),{name:"untracked_shopify_event"})}}},{key:"orderPlaced",value:function(){var t;new d("order_completed",l.now(),{uid:this.shopifyClientId,oid:null==(t=this.data)||null==(t=t.checkout)||null==(t=t.order)?void 0:t.id,c:null==(t=this.data)||null==(t=t.checkout)?void 0:t.currencyCode,cot:null==(t=this.data)||null==(t=t.checkout)?void 0:t.token,a:null==(t=this.data)||null==(t=t.checkout)||null==(t=t.totalPrice)?void 0:t.amount,ps:this.extractProducts(null==(t=this.data)||null==(t=t.checkout)?void 0:t.lineItems)})}},{key:"checkoutStarted",value:function(){var t;new d("order_started",l.now(),{uid:this.shopifyClientId,c:null==(t=this.data)||null==(t=t.checkout)?void 0:t.currencyCode,cot:null==(t=this.data)||null==(t=t.checkout)?void 0:t.token,a:null==(t=this.data)||null==(t=t.checkout)||null==(t=t.totalPrice)?void 0:t.amount,ps:this.extractProducts(null==(t=this.data)||null==(t=t.checkout)?void 0:t.lineItems)})}},{key:"collectionViewed",value:function(){var t;new d("collection_view",l.now(),{uid:this.shopifyClientId,clid:null==(t=this.data)||null==(t=t.collection)?void 0:t.id,cln:null==(t=this.data)||null==(t=t.collection)?void 0:t.title})}},{key:"paymentInfoSubmitted",value:function(){var t;new d("payment_info_submitted",l.now(),{uid:this.shopifyClientId,c:null==(t=this.data)||null==(t=t.checkout)?void 0:t.currencyCode,a:null==(t=this.data)||null==(t=t.checkout)||null==(t=t.totalPrice)?void 0:t.amount,ps:this.extractProducts(null==(t=this.data)||null==(t=t.checkout)?void 0:t.lineItems)})}},{key:"addToCart",value:function(){var t;new d("add_to_cart",l.now(),{uid:this.shopifyClientId,c:null==(t=this.data)||null==(t=t.checkout)?void 0:t.currencyCode,a:null==(t=this.data)||null==(t=t.checkout)||null==(t=t.totalPrice)?void 0:t.amount,ps:[{pid:null==(t=this.data)||null==(t=t.cartLine)||null==(t=t.merchandise)||null==(t=t.product)?void 0:t.id,vid:null==(t=this.data)||null==(t=t.cartLine)||null==(t=t.merchandise)?void 0:t.id}]})}},{key:"productView",value:function(){var t;new d("product_view",l.now(),{uid:this.shopifyClientId,c:null==(t=this.data)||null==(t=t.productVariant)||null==(t=t.price)?void 0:t.currencyCode,a:null==(t=this.data)||null==(t=t.productVariant)||null==(t=t.price)?void 0:t.amount,ps:[{ivid:null==(t=this.data)||null==(t=t.productVariant)?void 0:t.id,pid:null==(t=this.data)||null==(t=t.productVariant)||null==(t=t.product)?void 0:t.id}]})}},{key:"pageViewed",value:function(){var t;void 0!==this.context&&new d("page_view",l.now(),{uid:this.shopifyClientId,dl:null==(t=this.context.window)||null==(t=t.location)?void 0:t.href,dt:null==(t=this.context.window)?void 0:t.title,ln:null==(t=this.context.navigator)?void 0:t.language})}},{key:"searchSubmitted",value:function(){var t;new d("search_submitted",l.now(),{uid:this.shopifyClientId,st:null==(t=this.data)||null==(t=t.searchResult)?void 0:t.query})}}],[{key:"checkIfShopifyWebsite",value:function(){return!!r.ShopifyAnalytics}}]),n}();s.exists("uid")?s.set("uid",s.get("uid")):s.set("uid",l.guid()),s.setUtms(),s.setOrUpdateSession(),o.process=function(t,e,n){var i;"init"===t?(u.id=e,u.websiteType=f.checkIfShopifyWebsite()?"shopify":"regular",l.isPresent(e)&&s.set("sid",e),u.optionalInit=n):"param"===t?u.params[e]=function(){return n}:"event"===t?"pageload"!==e||u.pageLoadOnce?"pageload"!==e&&"pageclose"!==e&&new d(e,l.now(),n):(u.pageLoadOnce=!0,u.pageLoadID=l.pageviewId(),"object"===_typeof(i=n)?i.pageLoadID=u.pageLoadID:i={pageLoadID:u.pageLoadID},new d(e,o.t,i)):"shopify_event"===t&&new f(e,n)};for(var t=0,e=o.queue.length;t<e;t++)o.process.apply(o,o.queue[t]);var i="object"===("undefined"==typeof safari?"undefined":_typeof(safari))&&safari.pushNotification,h="onpageshow"in self;r.addEventListener(h&&!i?"pagehide":"unload",function(){u.pageCloseOnce||(u.pageCloseOnce=!0,new d("pageclose",l.now(),function(){var t={pageLoadID:null!=(t=u.pageLoadID)?t:"none"};return l.isPresent(u.externalHost)&&l.now()-u.externalHost.time<5e3&&(t.externalHost=u.externalHost.link),t}))}),r.addEventListener("load",function(){for(var t=a.getElementsByTagName("a"),e=0,n=t.length;e<n;e++)t[e].addEventListener("click",function(t){c.externalHost(this)&&(u.externalHost={link:this.href,time:l.now()})}.bind(t[e]));for(var i=a.querySelectorAll("[data-bgp-event]"),e=0,n=i.length;e<n;e++)i[e].addEventListener("click",function(t){var e=this.getAttribute("data-bgp-event");e&&new d(e,l.now(),this.getAttribute("data-bgp-data"))}.bind(i[e]))})}(window,document,window.BillyPix);